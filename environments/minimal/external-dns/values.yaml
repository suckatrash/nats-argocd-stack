provider: google

# Google Cloud DNS zone
google:
  project: erik-sandbox-408216
  # Use Workload Identity for authentication
  serviceAccountSecret: ""

# Only manage DNS records for this domain
domainFilters:
- gcp.iamusingtheinternet.com

# Specific zone to use (your delegated zone)
txtOwnerId: "external-dns"
txtPrefix: "_external-dns."

# Sources to watch for DNS records
sources:
- ingress
- service

# Policy: upsert-only prevents deletion of manually created records
policy: upsert-only

# Sync interval
interval: 1m

# Log level
logLevel: info

# Registry: store DNS record metadata in TXT records
registry: txt

# Service account annotation for Workload Identity
serviceAccount:
  create: true
  annotations:
    iam.gke.io/gcp-service-account: external-dns@erik-sandbox-408216.iam.gserviceaccount.com

# Resources
resources:
  requests:
    cpu: 10m
    memory: 32Mi
  limits:
    cpu: 50m
    memory: 64Mi

# Extra arguments
extraArgs:
- --google-zone-visibility=public
- --zone-id-filter=iamusingtheinternet-delegated
